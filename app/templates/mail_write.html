{% extends "base.html" %}

{% block head %}
    <title>New message</title>
{% endblock %}

{% block content %}
<h1>New message</h1>

<hr>

<!-- Основная форма -->
<form id="posting-form" class="form-horizontal" role="form" method="post">
    {{form_recepient.hidden_tag()}}
    {{form_subject.hidden_tag()}}
    {{form_message.hidden_tag()}}
    <div class="form-group">
        <div class="col-md-3">
            {% if recepient %}
            {{form_recepient.recepient(value=recepient, class='form-control')}}
            {% else %}
            {{form_recepient.recepient(placeholder='Username', class='form-control')}}
            {% endif %}
        </div>
        <a class="btn btn-primary" data-toggle="modal" data-target="#dialogbox"><i class="glyphicon glyphicon-book"></i></a>
    </div>
    <div class="form-group">
        <div class="col-md-3">
            {% if subject %}
            {{form_subject.topic(value=subject, class='form-control')}}
            {% else %}
            {{form_subject.topic(placeholder='Subject', class='form-control')}}
            {% endif %}
        </div>
    </div>
    <div class="form-group">
        <div class="col-md-6">
            <div id="btn-bold" class="btn btn-xs btn-primary">bold</div>
            <div id="btn-italic" class="btn btn-xs btn-primary">italic</div>
            <div id="btn-underlined" class="btn btn-xs btn-primary">underlined</div>
            <div id="btn-url" class="btn btn-xs btn-primary">url</div>
            <div id="btn-image" class="btn btn-xs btn-primary">image</div>
        </div>
    </div>
    <div class="form-group">
        <div class="col-md-6">
            {{form_message.message(class="form-control", rows="4", placeholder='Enter your text here')}}
        </div>
    </div>
    <div class="form-group">
        <div class="col-md-2">
            <input class="btn btn-primary form-control" type="submit" value="Send">
        </div>
    </div>
</form>

<!-- Модальный диалог выбора пользователя -->
<div class="modal fade" id="dialogbox">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Select recepient</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-6 col-md-offset-3">
                        <input id="dialog-input" type="text" class="form-control">
                    </div>
                </div>
                <br>
                <div class="row">
                    <div class="col-md-6 col-md-offset-3">
                        <select id="dialog-select" size="8" class="form-control">
                            {% for user in all_users %}
                            <option>{{user.login}}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="select-user-submit" type="button" class="btn btn-primary" data-dismiss="modal">Select</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

{% endblock %}