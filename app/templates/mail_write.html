{% extends "base.html" %}

{% block head %}
    <title>New message</title>
{% endblock %}

{% block content %}
<h1>New message</h1>

<hr>

<form class="form-horizontal" role="form" method="post" onsubmit="return PostingFormValidate()">
    {{form_recepient.hidden_tag()}}
    {{form_subject.hidden_tag()}}
    {{form_message.hidden_tag()}}
    <div class="form-group">
        <div class="col-md-3">
            {{form_recepient.recepient((if recepient: value=recepient.login else %placeholder='Username' endif ), class='form-control')}}
        </div>
        <a class="btn btn-primary" data-toggle="modal" data-target="#myModal"><i class="glyphicon glyphicon-book"></i></a>
    </div>
    {% if subject %}
    <div class="form-group">
        <div class="col-md-3">
            {{form_subject.topic(% if subject %value=subject% else %placeholder='Subject'% endif %, class='form-control', onkeyup='PostingFormUnmark(this)')}}
        </div>
    </div>
    <div class="form-group">
        <div class="col-md-6">
            <div class="btn btn-xs btn-primary" onclick="makeFormated('b')"}}">bold</div>
            <div class="btn btn-xs btn-primary" onclick="makeFormated('i')"}}">italic</div>
            <div class="btn btn-xs btn-primary" onclick="makeFormated('u')"}}">underlined</div>
            <div class="btn btn-xs btn-primary" onclick="makeURL()"}}">url</div>
            <div class="btn btn-xs btn-primary" onclick="makeIMG()"}}">image</div>
        </div>
    </div>
    <div class="form-group">
        <div class="col-md-6">
            {{form_message.message(class="form-control", rows="4", placeholder='Enter your text here', onkeyup="PostingFormUnmark(this)")}}
        </div>
    </div>
    <div class="form-group">
        <div class="col-md-2">
            <input class="btn btn-primary form-control" type="submit" value="Send">
        </div>
    </div>
</form>

<div class="modal fade" id="myModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Modal title</h4>
            </div>
        <div class="modal-body">
            <p>One fine body&hellip;</p>
        </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
            </div>
        </div>
    </div>
</div>


<div id="overlay"></div>
<div id="dialogbox">
    <div class="big">Select recepient</div>
    <input id="dialog-input" type="text" onkeyup="selectSearch()">
    <select id="dialog-select" size="8" onclick="selectUser(this)" ondblclick="selectUserClose()">
        {% for user in all_users %}
        <option>{{user.login}}</option>
        {% endfor %}
    </select>
    <div class="button" onclick="selectUserClose()">Ok</div>
</div>





{% endblock %}